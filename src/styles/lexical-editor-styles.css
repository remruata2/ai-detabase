/* Enhanced CSS for Lexical Editor to fix vertical text flow */

.editor-container {
  position: relative;
  width: 100% !important;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  display: block !important;
  background: white;
}

.editor-inner {
  position: relative;
  background: #fff;
  width: 100% !important;
  display: block !important;
}

.editor-input,
.fixed-editor {
  position: relative;
  display: block !important;
  width: 100% !important;
  min-height: 180px;
  padding: 12px;
  box-sizing: border-box !important;
  outline: none;
  resize: vertical;
  border: none;

  /* Critical text flow properties */
  overflow-wrap: break-word !important;
  word-break: normal !important;
  word-wrap: break-word !important;
  white-space: pre-wrap !important;

  /* Horizontal text orientation - explicitly set */
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;

  /* Other text properties */
  text-align: left !important;
  direction: ltr !important;

  font-size: 16px;
  line-height: 1.6;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    sans-serif;
}

/* Styling for the placeholder text */
.editor-placeholder {
  position: absolute;
  top: 12px;
  left: 12px;
  color: #9ca3af;
  font-size: 16px;
  pointer-events: none;
  user-select: none;
  display: inline-block;
  z-index: 1;
}

/* Critical override to ensure all text elements display horizontally */
.editor-input *,
.fixed-editor * {
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
}

/* Ensure paragraphs display as blocks */
.editor-input p,
.editor-input div[data-lexical-editor-paragraph] {
  display: block !important;
  width: 100% !important;
  margin: 0 0 12px 0;
  padding: 0;

  /* Critical text flow properties */
  overflow-wrap: break-word !important;
  word-break: normal !important;
  word-wrap: break-word !important;
  white-space: pre-wrap !important;

  /* Horizontal text orientation */
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  text-align: left !important;
  direction: ltr !important;
  line-height: 1.6;
}

/* Ensure inline text elements stay inline */
.editor-input span,
.editor-input strong,
.editor-input em,
.editor-input b,
.editor-input i,
.editor-input u,
.editor-input a {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  white-space: pre-wrap !important;
}

/* Target all direct children of paragraphs to ensure inline flow */
.editor-input p > * {
  display: inline !important;
}

/* Fix for any character wrapping issues */
.editor-input br {
  display: block !important;
  content: "";
  margin: 0;
  line-height: 0;
}

/* Specific fix for text nodes */
.editor-input [data-lexical-text="true"] {
  display: inline !important;
  white-space: pre-wrap !important;
  vertical-align: baseline !important;
}

/* Override any potential flexbox styling that might be interfering */
.editor-input *[style*="display: flex"],
.editor-input *[class*="flex"] {
  display: block !important;
}

/* Heading styles */
.editor-input h1,
.editor-input h2,
.editor-input h3,
.editor-input h4,
.editor-input h5,
.editor-input h6 {
  display: block !important;
  width: 100% !important;
  margin: 16px 0 12px 0;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  text-align: left !important;
  direction: ltr !important;
}

/* List styles */
.editor-input ul,
.editor-input ol {
  display: block !important;
  width: 100% !important;
  margin: 12px 0;
  padding-left: 24px;
}

.editor-input li {
  display: list-item !important;
  width: 100% !important;
  margin: 4px 0;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  text-align: left !important;
  direction: ltr !important;
}

/* Code block styles */
.editor-input pre,
.editor-input code {
  display: block !important;
  width: 100% !important;
  white-space: pre-wrap !important;
  font-family: "Courier New", monospace;
  background-color: #f3f4f6;
  padding: 8px;
  border-radius: 4px;
  margin: 8px 0;
}

/* Inline code */
.editor-input p code,
.editor-input span code {
  display: inline !important;
  padding: 2px 4px;
  margin: 0;
}

/* Quote styles */
.editor-input blockquote {
  display: block !important;
  width: 100% !important;
  border-left: 4px solid #d1d5db;
  padding-left: 16px;
  margin: 16px 0;
  font-style: italic;
  color: #6b7280;
}

/* Link styles */
.editor-input a {
  display: inline !important;
  color: #3b82f6;
  text-decoration: underline;
}

.editor-input a:hover {
  color: #1d4ed8;
}

/* Ensure the editor has focus styles */
.editor-input:focus {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
}

/* Fix for React/Next.js specific issues */
[data-lexical-editor="true"] {
  width: 100% !important;
  display: block !important;
}

/* Additional form control fixes */
[data-slot="form-item"] .editor-container,
[data-slot="form-control"] .editor-container {
  width: 100% !important;
  display: block !important;
}

/* CRITICAL: Force all text content to display horizontally */
.editor-input [data-lexical-text],
.editor-input span[data-lexical-text],
.editor-input div[data-lexical-text] {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
  white-space: pre-wrap !important;
  word-break: normal !important;
  overflow-wrap: break-word !important;
}

/* Prevent vertical text on any Lexical element */
[data-lexical-editor] *,
[data-lexical-editor] span,
[data-lexical-editor] div,
[data-lexical-editor] p {
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
}

/* Force horizontal display for all text nodes in the editor */
.editor-input::after {
  content: "";
  display: block;
  clear: both;
}

/* Specific fix for Lexical text nodes */
.editor-input [data-lexical-text="true"],
.editor-input span[data-key] {
  display: inline !important;
  vertical-align: baseline !important;
  line-height: inherit !important;
}

/* TYPING FIX: Target text nodes created during typing */
.editor-input span:not([class]) {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
  white-space: pre-wrap !important;
  vertical-align: baseline !important;
}

/* Fix for any dynamically created text elements */
.editor-input *[contenteditable="false"] {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
}

/* Additional fix for typing-specific text nodes */
.editor-input p span:empty:after {
  content: none !important;
}

/* Ensure all new text nodes follow horizontal flow */
.editor-input p > span,
.editor-input div > span {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
  white-space: pre-wrap !important;
  vertical-align: baseline !important;
  line-height: inherit !important;
}

/* Force proper text rendering during typing */
.editor-input [data-lexical-decorator="true"] span,
.editor-input [data-lexical-decorator="false"] span {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
}

/* CRITICAL FIX FOR SINGLE CHARACTER SPANS - NUCLEAR OPTION */
.editor-input span {
  display: inline !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
  float: none !important;
  position: static !important;
  vertical-align: baseline !important;
  line-height: inherit !important;
  width: auto !important;
  height: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  background: transparent !important;
  text-align: inherit !important;
  white-space: pre-wrap !important;
  word-break: normal !important;
  overflow-wrap: break-word !important;
  flex: none !important;
  grid-column: auto !important;
  grid-row: auto !important;
}

/* Force all paragraphs to NOT use flex-column */
.editor-input p {
  display: block !important;
  flex-direction: row !important;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
  text-align: left !important;
  width: 100% !important;
}

/* Prevent any flex-column behavior */
.editor-input *[style*="flex-direction: column"] {
  flex-direction: row !important;
}

.editor-input .flex-col,
.editor-input .flex-column {
  flex-direction: row !important;
}

/* Emergency fix - force all elements to be horizontal */
.editor-input * {
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
  direction: ltr !important;
}

/* Absolutely force inline spans */
.editor-input p span,
.editor-input div span,
.editor-input * span {
  display: inline !important;
  vertical-align: baseline !important;
  float: none !important;
  position: static !important;
  flex: none !important;
}
